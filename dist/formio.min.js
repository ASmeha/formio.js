/*! formiojs v4.0.0-beta.7 | https://unpkg.com/formiojs@4.0.0-beta.7/LICENSE.txt */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=45)}([function(e,t,r){var n=r(25),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t,r){var n=r(84),o=r(87);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(7),o=r(57),i=r(58),s="[object Null]",a="[object Undefined]",c=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:s:c&&c in Object(e)?o(e):i(e)}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var n=r(0).Symbol;e.exports=n},function(e,t,r){var n=r(1)(Object,"create");e.exports=n},function(e,t,r){var n=r(92),o=r(93),i=r(94),s=r(95),a=r(96);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t,r){var n=r(31);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(98);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(32),o=r(33);e.exports=function(e,t,r,i){var s=!r;r||(r={});for(var a=-1,c=t.length;++a<c;){var u=t[a],l=i?i(r[u],e[u],u,r,e):void 0;void 0===l&&(l=e[u]),s?o(r,u,l):n(r,u,l)}return r}},function(e,t,r){var n=r(5),o=r(3),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==i}},function(e,t,r){var n=r(1)(r(0),"Map");e.exports=n},function(e,t,r){var n=r(34),o=r(121),i=r(38);e.exports=function(e){return i(e)?n(e):o(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(25),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,r(16)(e))},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(129),o=r(40),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return i.call(e,t)}))}:o;e.exports=a},function(e,t,r){var n=r(133),o=r(14),i=r(134),s=r(135),a=r(136),c=r(5),u=r(30),l=u(n),f=u(o),p=u(i),h=u(s),d=u(a),v=c;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,r){var n=r(139);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var e=a(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){var n=r(7),o=r(56),i=r(2),s=r(13),a=1/0,c=n?n.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-a?"-0":r}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(4))},function(e,t,r){var n=r(62),o=r(63),i=r(64);e.exports=function(e,t,r){return t==t?i(e,t,r):n(e,o,r)}},function(e,t,r){var n=r(24);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(81),o=r(97),i=r(99),s=r(100),a=r(101);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t,r){var n=r(5),o=r(6),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==s||t==a||t==i||t==c}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(33),o=r(31),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var s=e[t];i.call(e,t)&&o(s,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(112);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(114),o=r(115),i=r(2),s=r(35),a=r(118),c=r(119),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),l=!r&&o(e),f=!r&&!l&&s(e),p=!r&&!l&&!f&&c(e),h=r||l||f||p,d=h?n(e.length,String):[],v=d.length;for(var y in e)!t&&!u.call(e,y)||h&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||d.push(y);return d}},function(e,t,r){(function(e){var n=r(0),o=r(117),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c}).call(this,r(16)(e))},function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var n=r(29),o=r(36);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,r){var n=r(34),o=r(124),i=r(38);e.exports=function(e){return i(e)?n(e,!0):o(e)}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(42),o=r(43),i=r(20),s=r(40),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:s;e.exports=a},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(37)(Object.getPrototypeOf,Object);e.exports=n},function(e,t,r){var n=r(42),o=r(2);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(46);var n=r(47),o=u(r(48)),i=u(r(49)),s=u(r(50)),a=u(r(74)),c=u(r(103));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(e){return null===e||void 0===e},h=function(e){return e&&"object"===f(e)},d=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e(t);if(this.base="",this.projectsUrl="",this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.vsUrl="",this.vId="",this.vUrl="",this.query="",this.path=t,this.options=n,n.hasOwnProperty("base")?this.base=n.base:e.baseUrl?this.base=e.baseUrl:this.base=window.location.href.match(/http[s]?:\/\/api./)[0],!t)return this.projectUrl="".concat(this.base,"/project"),this.projectsUrl="".concat(this.base,"/project"),this.projectId=!1,void(this.query="");n.hasOwnProperty("project")&&(this.projectUrl=n.project);var o=this.projectUrl||e.projectUrl,i=/(^|\/)(project)($|\/[^/]+)/,s=-1!==t.search(i);o&&this.base===o&&!s&&(this.noProject=!0,this.projectUrl=this.base),0!==t.indexOf("http")&&0!==t.indexOf("//")&&(t=this.base+t);var a=this.getUrlParts(t),c=[],u=a[1]+a[2],l=(t=a.length>3?a[3]:"").split("?");l.length>1&&(t=l[0],this.query="?".concat(l[1]));var f=function(e,n){r["".concat(e,"sUrl")]="".concat(n,"/").concat(e);var o=new RegExp("/".concat(e,"/([^/]+)"));return-1!==t.search(o)&&(c=t.match(o),r["".concat(e,"Url")]=c?n+c[0]:"",r["".concat(e,"Id")]=c.length>1?c[1]:"",n+=c[0]),n},p=function e(t,r,n){for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];if(Array.isArray(i))e(i,r,!0);else{var s=f(i,r);r=n?r:s}}};if(this.projectUrl&&this.projectUrl!==this.base||(this.projectUrl=u),!this.noProject){if(s)p(["project"],u),t=t.replace(i,"");else if(u===this.base){if(a.length>3&&t.split("/").length>1){var h=t.split("/");h.shift(),this.projectId=h.shift(),t="/".concat(h.join("/")),this.projectUrl="".concat(u,"/").concat(this.projectId)}}else a.length>2&&(a[2].split(".").length>2||u.includes("localhost"))&&(this.projectUrl=u,this.projectId=a[2].split(".")[0]);this.projectsUrl=this.projectsUrl||"".concat(this.base,"/project")}if(-1!==t.search(/(^|\/)(form)($|\/)/))p(["form",["submission","action","v"]],this.projectUrl);else{var d=new RegExp("/(submission|action|v)($|/.*)"),v=t.match(d);this.pathType=v&&v.length>1?v[1]:"",t=(t=t.replace(d,"")).replace(/\/$/,""),this.formsUrl="".concat(this.projectUrl,"/form"),this.formUrl=t?this.projectUrl+t:"",this.formId=t.replace(/^\/+|\/+$/g,"");var y=["submission","action","v"];for(var m in y)if(y.hasOwnProperty(m)){var b=y[m];this["".concat(b,"sUrl")]="".concat(this.projectUrl+t,"/").concat(b),this.pathType===b&&v.length>2&&v[2]&&(this["".concat(b,"Id")]=v[2].replace(/^\/+|\/+$/g,""),this["".concat(b,"Url")]=this.projectUrl+t+v[0])}}e.projectUrlSet||(e.projectUrl=this.projectUrl)}return function(e,t,r){t&&l(e.prototype,t),r&&l(e,r)}(e,[{key:"delete",value:function(t,r){var n="".concat(t,"Id"),o="".concat(t,"Url");return this[n]||Promise.reject("Nothing to delete"),e.cache={},this.makeRequest(t,this[o],"delete",null,r)}},{key:"index",value:function(t,r,n){var o="".concat(t,"Url");return(r=r||"")&&h(r)&&(r="?".concat(e.serialize(r.params))),this.makeRequest(t,this[o]+r,"get",null,n)}},{key:"save",value:function(t,r,n){var o="".concat(t,"Id"),i="".concat(t,"Url"),s=this[o]||r._id?"put":"post",a=this[o]?this[i]:this["".concat(t,"sUrl")];return this[o]||!r._id||"put"!==s||a.includes(r._id)||(a+="/".concat(r._id)),e.cache={},this.makeRequest(t,a+this.query,s,r,n)}},{key:"load",value:function(t,r,n){var o="".concat(t,"Id"),i="".concat(t,"Url");return r&&h(r)&&(r=e.serialize(r.params)),r=r?this.query?"".concat(this.query,"&").concat(r):"?".concat(r):this.query,this[o]?this.makeRequest(t,this[i]+r,"get",null,n):Promise.reject("Missing ".concat(o))}},{key:"makeRequest",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.makeRequest.apply(e,[this].concat(r))}},{key:"loadProject",value:function(e,t){return this.load("project",e,t)}},{key:"saveProject",value:function(e,t){return this.save("project",e,t)}},{key:"deleteProject",value:function(e){return this.delete("project",e)}},{key:"loadForm",value:function(t,r){var n=this;return this.load("form",t,r).then(function(o){return!o.revisions||isNaN(parseInt(n.vId))?o:"current"===o.revisions&&n.submissionId?o:(t&&h(t)&&(t=e.serialize(t.params)),t=t?n.query?"".concat(n.query,"&").concat(t):"?".concat(t):n.query,n.makeRequest("form",n.vUrl+t,"get",null,r).then(function(e){return o.components=e.components,Object.assign({},o)}).catch(function(){return Object.assign({},o)}))})}},{key:"saveForm",value:function(e,t){return this.save("form",e,t)}},{key:"deleteForm",value:function(e){return this.delete("form",e)}},{key:"loadForms",value:function(e,t){return this.index("forms",e,t)}},{key:"loadSubmission",value:function(e,t){var r=this;return this.load("submission",e,t).then(function(e){return r.vId=e._fvid,r.vUrl="".concat(r.formUrl,"/v/").concat(r.vId),e})}},{key:"saveSubmission",value:function(e,t){return isNaN(parseInt(this.vId))||(e._fvid=this.vId),this.save("submission",e,t)}},{key:"deleteSubmission",value:function(e){return this.delete("submission",e)}},{key:"loadSubmissions",value:function(e,t){return this.index("submissions",e,t)}},{key:"loadAction",value:function(e,t){return this.load("action",e,t)}},{key:"saveAction",value:function(e,t){return this.save("action",e,t)}},{key:"deleteAction",value:function(e){return this.delete("action",e)}},{key:"loadActions",value:function(e,t){return this.index("actions",e,t)}},{key:"availableActions",value:function(){return this.makeRequest("availableActions","".concat(this.formUrl,"/actions"))}},{key:"actionInfo",value:function(e){return this.makeRequest("actionInfo","".concat(this.formUrl,"/actions/").concat(e))}},{key:"isObjectId",value:function(e){return new RegExp("^[0-9a-fA-F]{24}$").test(e)}},{key:"getProjectId",value:function(){return this.projectId?this.isObjectId(this.projectId)?Promise.resolve(this.projectId):this.loadProject().then(function(e){return e._id}):Promise.resolve("")}},{key:"getFormId",value:function(){return this.formId?this.isObjectId(this.formId)?Promise.resolve(this.formId):this.loadForm().then(function(e){return e._id}):Promise.resolve("")}},{key:"currentUser",value:function(t){return e.currentUser(this,t)}},{key:"accessInfo",value:function(){return e.accessInfo(this)}},{key:"getToken",value:function(t){return e.getToken(Object.assign({formio:this},this.options,t))}},{key:"setToken",value:function(t,r){return e.setToken(t,Object.assign({formio:this},this.options,r))}},{key:"getTempToken",value:function(t,r,n){return e.getToken(n)?this.makeRequest("tempToken","".concat(this.projectUrl,"/token"),"GET",null,{ignoreCache:!0,header:new Headers({"x-expire":t,"x-allow":r})}):Promise.reject("You must be authenticated to generate a temporary auth token.")}},{key:"getDownloadUrl",value:function(e){var t=this;if(!this.submissionId)return Promise.resolve("");if(!e)return this.loadForm().then(function(e){return e?t.getDownloadUrl(e):""});var r="/project/".concat(e.project);r+="/form/".concat(e._id),r+="/submission/".concat(this.submissionId),r+="/download";var n=this.base+r;return new Promise(function(e,o){t.getTempToken(3600,"GET:".concat(r)).then(function(t){n+="?token=".concat(t.key),e(n)},function(){e(n)}).catch(o)})}},{key:"uploadFile",value:function(t,r,n,o,i,s,a){var c=this,u={provider:t,method:"upload",file:r,fileName:n,dir:o},l=e.pluginWait("preRequest",u).then(function(){return e.pluginGet("fileRequest",u).then(function(u){if(t&&p(u)){if(e.providers.storage.hasOwnProperty(t))return new e.providers.storage[t](c).uploadFile(r,n,o,i,s,a);throw"Storage provider not found"}return u||{url:""}})});return e.pluginAlter("wrapFileRequestPromise",l,u)}},{key:"downloadFile",value:function(t){var r=this,n={method:"download",file:t},o=e.pluginWait("preRequest",n).then(function(){return e.pluginGet("fileRequest",n).then(function(n){if(t.storage&&p(n)){if(e.providers.storage.hasOwnProperty(t.storage))return new e.providers.storage[t.storage](r).downloadFile(t);throw"Storage provider not found"}return n||{url:""}})});return e.pluginAlter("wrapFileRequestPromise",o,n)}},{key:"canSubmit",value:function(){return Promise.all([this.loadForm(),this.currentUser(),this.accessInfo()]).then(function(t){var r=t.shift(),n=t.shift(),o=t.shift(),i={},s={};for(var a in o.roles)if(o.roles.hasOwnProperty(a)){var c=o.roles[a];c.default&&(i=c),c.admin&&(s=c)}var u=!1,l=!1;if(n&&n.roles.includes(s._id))return!0;for(var f in r.submissionAccess)if(r.submissionAccess.hasOwnProperty(f)){var p=r.submissionAccess[f];if("create_all"===p.type||"create_own"===p.type){for(var h in p.roles)if(p.roles.hasOwnProperty(h)&&(i._id===p.roles[h]&&(l=!0),n&&n.roles.includes(p.roles[h]))){u=!0;break}if(u)break}}return!u&&l&&(u=!0,e.setUser(null)),u})}},{key:"getUrlParts",value:function(t){return e.getUrlParts(t,this)}}],[{key:"loadProjects",value:function(t,r){return h(t=t||"")&&(t="?".concat(e.serialize(t.params))),e.makeStaticRequest("".concat(e.baseUrl,"/project").concat(t),"GET",null,r)}},{key:"getUrlParts",value:function(t,r){var n=r&&r.base?r.base:e.baseUrl,o="^(http[s]?:\\/\\/)";return n&&0===t.indexOf(n)?o+="(".concat(n.replace(/^http[s]?:\/\//,""),")"):o+="([^/]+)",o+="($|\\/.*)",t.match(new RegExp(o))}},{key:"serialize",value:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r])));return t.join("&")}},{key:"getRequestArgs",value:function(e,t,r,n,o,i){n=(n||"GET").toUpperCase(),i&&h(i)||(i={});var s={url:r,method:n,data:o||null,opts:i};return t&&(s.type=t),e&&(s.formio=e),s}},{key:"makeStaticRequest",value:function(t,r,n,o){var i=e.getRequestArgs(null,"",t,r,n,o),s=e.pluginWait("preRequest",i).then(function(){return e.pluginGet("staticRequest",i).then(function(n){return p(n)?e.request(t,r,i.data,i.opts.header,i.opts):n})});return e.pluginAlter("wrapStaticRequestPromise",s,i)}},{key:"makeRequest",value:function(t,r,n,o,i,s){if(!t)return e.makeStaticRequest(n,o,i,s);var a=e.getRequestArgs(t,r,n,o,i,s);a.opts=a.opts||{},a.opts.formio=t;var c=e.pluginWait("preRequest",a).then(function(){return e.pluginGet("request",a).then(function(t){return p(t)?e.request(n,o,a.data,a.opts.header,a.opts):t})});return e.pluginAlter("wrapRequestPromise",c,a)}},{key:"request",value:function(t,r,n,o,s){if(!t)return Promise.reject("No url provided");r=(r||"GET").toUpperCase(),function(e){return f(e)===f(!0)}(s)&&(s={ignoreCache:s}),s&&h(s)||(s={});var a=btoa(t);if(!s.ignoreCache&&"GET"===r&&e.cache.hasOwnProperty(a))return(0,c.default)(e.cache[a]);var u=o||new Headers(s.headers||{Accept:"application/json","Content-type":"application/json; charset=UTF-8"}),l=e.getToken(s);l&&!s.noToken&&u.append("x-jwt-token",l);var p={method:r,headers:u,mode:"cors"};n&&(p.body=JSON.stringify(n)),((p=e.pluginAlter("requestOptions",p,t)).namespace||e.namespace)&&(s.namespace=p.namespace||e.namespace);var d=p.headers.get("x-jwt-token");return fetch(t,p).then(function(n){if(!(n=e.pluginAlter("requestResponse",n,e)).ok)return 440===n.status?(e.setToken(null,s),e.events.emit("formio.sessionExpired",n.body)):401===n.status&&e.events.emit("formio.unauthorized",n.body),(n.headers.get("content-type").includes("application/json")?n.json():n.text()).then(function(e){return Promise.reject(e)});var o=n.headers.get("x-jwt-token"),i=!1;return"GET"!==r||d||!o||s.external||t.includes("token=")||t.includes("x-jwt-token=")||(console.warn("Token was introduced in request."),i=!0),n.status>=200&&n.status<300&&o&&""!==o&&!i&&e.setToken(o,s),204===n.status?{}:(n.headers.get("content-type").includes("application/json")?n.json():n.text()).then(function(e){var t=n.headers.get("content-range");if(t&&h(e)){if("*"!==(t=t.split("/"))[0]){var r=t[0].split("-");e.skip=Number(r[0]),e.limit=r[1]-r[0]+1}e.serverCount="*"===t[1]?t[1]:Number(t[1])}if(!s.getHeaders)return e;var o={};return n.headers.forEach(function(e,t){o[t]=e}),{result:e,headers:o}})}).then(function(t){if(s.getHeaders)return t;"GET"===r&&(e.cache[a]=(0,c.default)(t));var n={};return Array.isArray(t)?((n=t.map(i.default)).skip=t.skip,n.limit=t.limit,n.serverCount=t.serverCount):n=(0,i.default)(t),n}).catch(function(t){return"Bad Token"===t&&(e.setToken(null,s),e.events.emit("formio.badToken",t)),t.message&&(t.message="Could not connect to API server (".concat(t.message,")"),t.networkError=!0),"GET"===r&&delete e.cache[a],Promise.reject(t)})}},{key:"setToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;t=t||"";var n="".concat((r="string"==typeof r?{namespace:r}:r||{}).namespace||e.namespace||"formio","Token");if(e.tokens||(e.tokens={}),!e.tokens[n]||e.tokens[n]!==t){if(e.tokens[n]=t,!t){e.setUser(null,r);try{return localStorage.removeItem(n)}catch(e){return o.default.erase(n,{path:"/"})}}try{localStorage.setItem(n,t)}catch(e){o.default.set(n,t,{path:"/"})}return e.currentUser(r.formio,r)}}},{key:"getToken",value:function(t){var r="".concat((t="string"==typeof t?{namespace:t}:t||{}).namespace||e.namespace||"formio","Token");if(e.tokens||(e.tokens={}),e.tokens[r])return e.tokens[r];try{return e.tokens[r]=localStorage.getItem(r)||"",e.tokens[r]}catch(t){return e.tokens[r]=o.default.get(r),e.tokens[r]}}},{key:"setUser",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(r.namespace||e.namespace||"formio","User");if(!t){e.setToken(null,r);try{return localStorage.removeItem(n)}catch(e){return o.default.erase(n,{path:"/"})}}try{localStorage.setItem(n,JSON.stringify(t))}catch(e){o.default.set(n,JSON.stringify(t),{path:"/"})}}},{key:"getUser",value:function(t){var r="".concat((t=t||{}).namespace||e.namespace||"formio","User");try{return JSON.parse(localStorage.getItem(r)||null)}catch(e){return JSON.parse(o.default.get(r))}}},{key:"setBaseUrl",value:function(t){e.baseUrl=t,e.projectUrlSet||(e.projectUrl=t)}},{key:"getBaseUrl",value:function(){return e.baseUrl}},{key:"setApiUrl",value:function(t){return e.setBaseUrl(t)}},{key:"getApiUrl",value:function(){return e.getBaseUrl()}},{key:"setAppUrl",value:function(t){console.warn("Formio.setAppUrl() is deprecated. Use Formio.setProjectUrl instead."),e.projectUrl=t,e.projectUrlSet=!0}},{key:"setProjectUrl",value:function(t){e.projectUrl=t,e.projectUrlSet=!0}},{key:"getAppUrl",value:function(){return console.warn("Formio.getAppUrl() is deprecated. Use Formio.getProjectUrl instead."),e.projectUrl}},{key:"getProjectUrl",value:function(){return e.projectUrl}},{key:"clearCache",value:function(){e.cache={}}},{key:"noop",value:function(){}},{key:"identity",value:function(e){return e}},{key:"deregisterPlugin",value:function(t){var r=e.plugins.length;return e.plugins=e.plugins.filter(function(r){return r!==t&&r.__name!==t||((r.deregister||e.noop).call(t,e),!1)}),r!==e.plugins.length}},{key:"registerPlugin",value:function(t,r){e.plugins.push(t),e.plugins.sort(function(e,t){return(t.priority||0)-(e.priority||0)}),t.__name=r,(t.init||e.noop).call(t,e)}},{key:"getPlugin",value:function(t){var r=!0,n=!1,o=void 0;try{for(var i,s=e.plugins[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value;if(a.__name===t)return a}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return null}},{key:"pluginWait",value:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Promise.all(e.plugins.map(function(r){var o;return(o=r[t]||e.noop).call.apply(o,[r].concat(n))}))}},{key:"pluginGet",value:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return function r(o){var i,s=e.plugins[o];return s?Promise.resolve((i=s[t]||e.noop).call.apply(i,[s].concat(n))).then(function(e){return p(e)?r(o+1):e}):Promise.resolve(null)}(0)}},{key:"pluginAlter",value:function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return e.plugins.reduce(function(r,n){return(n[t]||e.identity).apply(void 0,[r].concat(o))},r)}},{key:"accessInfo",value:function(t){var r=t?t.projectUrl:e.projectUrl;return e.makeRequest(t,"accessInfo","".concat(r,"/access"))}},{key:"currentUser",value:function(t,r){var n=t?t.projectUrl:e.projectUrl||e.baseUrl;n+="/current";var o=e.getUser(r);if(o)return e.pluginAlter("wrapStaticRequestPromise",Promise.resolve(o),{url:n,method:"GET",options:r});var i=e.getToken(r);return r&&r.external||i?e.makeRequest(t,"currentUser",n,"GET",null,r).then(function(t){return e.setUser(t,r),t}):e.pluginAlter("wrapStaticRequestPromise",Promise.resolve(null),{url:n,method:"GET",options:r})}},{key:"logout",value:function(t,r){(r=r||{}).formio=t,e.setToken(null,r),e.setUser(null,r),e.clearCache();var n=t?t.projectUrl:e.baseUrl;return e.makeRequest(t,"logout","".concat(n,"/logout"))}},{key:"oAuthCurrentUser",value:function(t,r){return e.currentUser(t,{external:!0,headers:{Authorization:"Bearer ".concat(r)}})}},{key:"oktaInit",value:function(t){if(t=t||{},void 0!==("undefined"==typeof OktaAuth?"undefined":f(OktaAuth))&&(t.OktaAuth=OktaAuth),void 0===f(t.OktaAuth)){var r="Cannot find OktaAuth. Please include the Okta JavaScript SDK within your application. See https://developer.okta.com/code/javascript/okta_auth_sdk for an example.";return console.warn(r),Promise.reject(r)}return new Promise(function(r,n){var o=t.OktaAuth;delete t.OktaAuth;var i=new o(t),s=i.tokenManager.get("accessToken");s?r(e.oAuthCurrentUser(t.formio,s.accessToken)):location.hash?i.token.parseFromUrl().then(function(n){i.tokenManager.add("accessToken",n),r(e.oAuthCurrentUser(t.formio,n.accessToken))}).catch(function(e){console.warn(e),n(e)}):(i.token.getWithRedirect({responseType:"token",scopes:t.scopes}),r(!1))})}},{key:"ssoInit",value:function(t,r){switch(t){case"okta":return e.oktaInit(r);default:return console.warn("Unknown SSO type"),Promise.reject("Unknown SSO type")}}},{key:"requireLibrary",value:function(t,r,n,o){if(!e.libraries.hasOwnProperty(t)){e.libraries[t]={},e.libraries[t].ready=new Promise(function(r,n){e.libraries[t].resolve=r,e.libraries[t].reject=n});var i="".concat(t,"Callback");o||window[i]||(window[i]=function(){return e.libraries[t].resolve()});var s=(0,a.default)(window,r);if(s)e.libraries[t].resolve(s);else if((n=Array.isArray(n)?n:[n]).forEach(function(e){var t={},r="";switch("string"==typeof e&&(e={type:"script",src:e}),e.type){case"script":r="script",t={src:e.src,type:"text/javascript",defer:!0,async:!0};break;case"styles":r="link",t={href:e.src,rel:"stylesheet"}}var n=document.createElement(r);for(var o in t)n.setAttribute(o,t[o]);document.getElementsByTagName("head")[0].appendChild(n)}),o)var c=setInterval(function(){var n=(0,a.default)(window,r);n&&(clearInterval(c),e.libraries[t].resolve(n))},200)}return e.libraries[t].ready}},{key:"libraryReady",value:function(t){return e.libraries.hasOwnProperty(t)&&e.libraries[t].ready?e.libraries[t].ready:Promise.reject("".concat(t," library was not required."))}},{key:"token",get:function(){return e.tokens||(e.tokens={}),e.tokens.formioToken?e.tokens.formioToken:""},set:function(t){return e.tokens||(e.tokens={}),e.tokens.formioToken=t||""}}]),e}();t.default=d,d.libraries={},d.Promise=Promise,d.Headers=Headers,d.baseUrl="https://api.form.io",d.projectUrl=d.baseUrl,d.projectUrlSet=!1,d.plugins=[],d.cache={},d.providers=s.default,d.events=new n.EventEmitter2({wildcard:!1,maxListeners:0}),"object"!==(void 0===e?"undefined":f(e))||e.Formio||(e.Formio=d)}).call(this,r(4))},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(e){return e&&DataView.prototype.isPrototypeOf(e)},o=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=a(e),t=c(t);var r=this.map[e];this.map[e]=r?r+","+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=c(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},v.call(y.prototype),v.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var s=[301,302,303,307,308];b.redirect=function(e,t){if(-1===s.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=y,e.Response=b,e.fetch=function(e,r){return new Promise(function(n,o){var i=new y(e,r),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:function(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new b(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&t.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function h(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&n(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!o(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e,t){var r=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return i.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,r){(function(n){var o;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(i){var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=10;function c(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==i?e.maxListeners:a,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=a}function l(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),void 0!==n&&n.emitWarning){var o=new Error(r);o.name="MaxListenersExceededWarning",o.emitter=this,o.count=e,n.emitWarning(o)}else console.error(r),console.trace&&console.trace()}function f(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function p(e,t,r,n){if(!r)return[];var o,i,s,a,c,u,l,f=[],h=t.length,d=t[n],v=t[n+1];if(n===h&&r._listeners){if("function"==typeof r._listeners)return e&&e.push(r._listeners),[r];for(o=0,i=r._listeners.length;o<i;o++)e&&e.push(r._listeners[o]);return[r]}if("*"===d||"**"===d||r[d]){if("*"===d){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(f=f.concat(p(e,t,r[s],n+1)));return f}if("**"===d){for(s in(l=n+1===h||n+2===h&&"*"===v)&&r._listeners&&(f=f.concat(p(e,t,r,h))),r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!l&&(f=f.concat(p(e,t,r[s],h))),f=f.concat(p(e,t,r[s],n))):f=s===v?f.concat(p(e,t,r[s],n+2)):f.concat(p(e,t,r[s],n)));return f}f=f.concat(p(e,t,r[d],n+1))}if((a=r["*"])&&p(e,t,a,n+1),c=r["**"])if(n<h)for(s in c._listeners&&p(e,t,c,h),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?p(e,t,c[s],n+2):s===d?p(e,t,c[s],n+1):((u={})[s]=c[s],p(e,t,{"**":u},n+1)));else c._listeners?p(e,t,c,h):c["*"]&&c["*"]._listeners&&p(e,t,c["*"],h);return f}f.EventEmitter2=f,f.prototype.delimiter=".",f.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},f.prototype.event="",f.prototype.once=function(e,t){return this._once(e,t,!1)},f.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},f.prototype._once=function(e,t,r){return this._many(e,1,t,r),this},f.prototype.many=function(e,t,r){return this._many(e,t,r,!1)},f.prototype.prependMany=function(e,t,r){return this._many(e,t,r,!0)},f.prototype._many=function(e,t,r,n){var o=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&o.off(e,i),r.apply(this,arguments)}return i._origin=r,this._on(e,i,n),o},f.prototype.emit=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,r,n,o,i,s=arguments.length;if(this._all&&this._all.length){if(i=this._all.slice(),s>3)for(t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];for(n=0,r=i.length;n<r;n++)switch(this.event=e,s){case 1:i[n].call(this,e);break;case 2:i[n].call(this,e,arguments[1]);break;case 3:i[n].call(this,e,arguments[1],arguments[2]);break;default:i[n].apply(this,t)}}if(this.wildcard){i=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();p.call(this,i,a,this.listenerTree,0)}else{if("function"==typeof(i=this._events[e])){switch(this.event=e,s){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];i.apply(this,t)}return!0}i&&(i=i.slice())}if(i&&i.length){if(s>3)for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];for(n=0,r=i.length;n<r;n++)switch(this.event=e,s){case 1:i[n].call(this);break;case 2:i[n].call(this,arguments[1]);break;case 3:i[n].call(this,arguments[1],arguments[2]);break;default:i[n].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},f.prototype.emitAsync=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,r,n,o,i,s=[],a=arguments.length;if(this._all){if(a>3)for(t=new Array(a),o=1;o<a;o++)t[o]=arguments[o];for(n=0,r=this._all.length;n<r;n++)switch(this.event=e,a){case 1:s.push(this._all[n].call(this,e));break;case 2:s.push(this._all[n].call(this,e,arguments[1]));break;case 3:s.push(this._all[n].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[n].apply(this,t))}}if(this.wildcard){i=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();p.call(this,i,u,this.listenerTree,0)}else i=this._events[e];if("function"==typeof i)switch(this.event=e,a){case 1:s.push(i.call(this));break;case 2:s.push(i.call(this,arguments[1]));break;case 3:s.push(i.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(a-1),o=1;o<a;o++)t[o-1]=arguments[o];s.push(i.apply(this,t))}else if(i&&i.length){if(i=i.slice(),a>3)for(t=new Array(a-1),o=1;o<a;o++)t[o-1]=arguments[o];for(n=0,r=i.length;n<r;n++)switch(this.event=e,a){case 1:s.push(i[n].call(this));break;case 2:s.push(i[n].call(this,arguments[1]));break;case 3:s.push(i[n].call(this,arguments[1],arguments[2]));break;default:s.push(i[n].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},f.prototype.on=function(e,t){return this._on(e,t,!1)},f.prototype.prependListener=function(e,t){return this._on(e,t,!0)},f.prototype.onAny=function(e){return this._onAny(e,!1)},f.prototype.prependAny=function(e){return this._onAny(e,!0)},f.prototype.addListener=f.prototype.on,f.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},f.prototype._on=function(e,t,r){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||c.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(function(e,t){for(var r=0,n=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;r+1<n;r++)if("**"===e[r]&&"**"===e[r+1])return;for(var o=this.listenerTree,s=e.shift();s!==i;){if(o[s]||(o[s]={}),o=o[s],0===e.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(t),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,l.call(this,o._listeners.length,s))):o._listeners=t,!0;s=e.shift()}return!0}.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,l.call(this,this._events[e].length,e))):this._events[e]=t,this)},f.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();n=p.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],n.push({_listeners:r})}for(var a=0;a<n.length;a++){var c=n[a];if(r=c._listeners,s(r)){for(var u=-1,l=0,f=r.length;l<f;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){u=l;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),0===r.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==i){var r=Object.keys(t);for(var n in r){var o=r[n],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[o]),0===Object.keys(s).length&&delete t[o])}}}(this.listenerTree),this},f.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(r=0,n=(t=this._all).length;r<n;r++)if(e===t[r])return t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(r=0,n=t.length;r<n;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},f.prototype.removeListener=f.prototype.off,f.prototype.removeAllListeners=function(e){if(e===i)return!this._events||c.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),r=p.call(this,null,t,this.listenerTree,0),n=0;n<r.length;n++){r[n]._listeners=null}else this._events&&(this._events[e]=null);return this},f.prototype.listeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return p.call(this,t,r,this.listenerTree,0),t}return this._events||c.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},f.prototype.eventNames=function(){return Object.keys(this._events)},f.prototype.listenerCount=function(e){return this.listeners(e).length},f.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return f}.call(t,r,t,e))===i||(e.exports=o)}()}).call(this,r(23))},function(e,t){t.defaults={},t.set=function(e,r,n){var o=n||{},i=t.defaults,s=o.expires||i.expires,a=o.domain||i.domain,c=void 0!==o.path?o.path:void 0!==i.path?i.path:"/",u=void 0!==o.secure?o.secure:i.secure,l=void 0!==o.httponly?o.httponly:i.httponly,f=void 0!==o.samesite?o.samesite:i.samesite,p=s?new Date("number"==typeof s?(new Date).getTime()+864e5*s:s):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(p&&p.getTime()>=0?";expires="+p.toUTCString():"")+(a?";domain="+a:"")+(c?";path="+c:"")+(u?";secure":"")+(l?";httponly":"")+(f?";samesite="+f:"")},t.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},t.erase=function(e,r){t.set(e,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}},function(e,t){e.exports=function(e){if(!e||"object"!=typeof e)return e;var t;if(n(e)){var o=e.length;t=Array(o);for(var i=0;i<o;i++)t[i]=e[i]}else{var s=r(e);t={};i=0;for(var a=s.length;i<a;i++){var c=s[i];t[c]=e[c]}}return t};var r=Object.keys||function(e){var t=[];for(var r in e)({}).hasOwnProperty.call(e,r)&&t.push(r);return t},n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={storage:function(e){return e&&e.__esModule?e:{default:e}}(r(51)).default};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(52)),o=a(r(53)),i=a(r(54)),s=a(r(70));function a(e){return e&&e.__esModule?e:{default:e}}var c={base64:n.default,dropbox:o.default,s3:i.default,url:s.default};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return{title:"Base64",name:"base64",uploadFile:function(e,t){var r=this,n=new FileReader;return new Promise(function(o,i){n.onload=function(r){var n=r.target.result;o({storage:"base64",name:t,url:n,size:e.size,type:e.type})},n.onerror=function(){return i(r)},n.readAsDataURL(e)})},downloadFile:function(e){return Promise.resolve(e)}}};n.title="Base64";var o=n;t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return{uploadFile:function(t,r,n,o){return new Promise(function(i,s){var a=new XMLHttpRequest;"function"==typeof o&&(a.upload.onprogress=o);var c=new FormData;c.append("name",r),c.append("dir",n),c.append("file",t),a.onerror=function(e){e.networkError=!0,s(e)},a.onload=function(){if(a.status>=200&&a.status<300){var e=JSON.parse(a.response);e.storage="dropbox",e.size=t.size,e.type=t.type,e.url=e.path_lower,i(e)}else s(a.response||"Unable to upload file")},a.onabort=s,a.open("POST","".concat(e.formUrl,"/storage/dropbox"));var u=e.getToken();u&&a.setRequestHeader("x-jwt-token",u),a.send(c)})},downloadFile:function(t){var r=e.getToken();return t.url="".concat(e.formUrl,"/storage/dropbox?path_lower=").concat(t.path_lower).concat(r?"&x-jwt-token=".concat(r):""),Promise.resolve(t)}}};n.title="Dropbox";var o=n;t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(55));var o=function(e){return(0,n.default)(e,"/")},i=function(e){return e.filter(function(e){return!!e}).map(o).join("/")},s=function(e){return{uploadFile:function(t,r,n,o){return new Promise(function(s,a){var c=new XMLHttpRequest;c.onerror=function(e){e.networkError=!0,a(e)},c.onabort=a,c.onload=function(){if(c.status>=200&&c.status<300){var e=JSON.parse(c.response),u=new XMLHttpRequest;if("function"==typeof o&&(u.upload.onprogress=o),e.data.fileName=r,e.data.key=i([e.data.key,n,r]),u.onerror=function(e){e.networkError=!0,a(e)},u.onload=function(){u.status>=200&&u.status<300?s({storage:"s3",name:r,bucket:e.bucket,key:e.data.key,url:i([e.url,e.data.key]),acl:e.data.acl,size:t.size,type:t.type}):a(u.response||"Unable to upload file")},u.onabort=a,e.signed)u.open("PUT",e.signed),u.setRequestHeader("Content-Type",t.type),u.send(t);else{var l=new FormData;for(var f in e.data)l.append(f,e.data[f]);l.append("file",t),u.open("POST",e.url),u.send(l)}}else a(c.response||"Unable to sign file")},c.open("POST","".concat(e.formUrl,"/storage/s3")),c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-Type","application/json; charset=UTF-8");var u=e.getToken();u&&c.setRequestHeader("x-jwt-token",u),c.send(JSON.stringify({name:i([n,r]),size:t.size,type:t.type}))})},downloadFile:function(t){return"public-read"!==t.acl?e.makeRequest("file","".concat(e.formUrl,"/storage/s3?bucket=").concat(o(t.bucket),"&key=").concat(o(t.key)),"GET"):Promise.resolve(t)}}};s.title="S3";var a=s;t.default=a},function(e,t,r){var n=r(24),o=r(59),i=r(61),s=r(65),a=r(66),c=r(27),u=/^\s+|\s+$/g;e.exports=function(e,t,r){if((e=c(e))&&(r||void 0===t))return e.replace(u,"");if(!e||!(t=n(t)))return e;var l=a(e),f=a(t),p=s(l,f),h=i(l,f)+1;return o(l,p,h).join("")}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(7),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[a]=r:delete e[a]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n=r(60);e.exports=function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:n(e,t,r)}},function(e,t){e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}},function(e,t,r){var n=r(26);e.exports=function(e,t){for(var r=e.length;r--&&n(t,e[r],0)>-1;);return r}},function(e,t){e.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(26);e.exports=function(e,t){for(var r=-1,o=e.length;++r<o&&n(t,e[r],0)>-1;);return r}},function(e,t,r){var n=r(67),o=r(68),i=r(69);e.exports=function(e){return o(e)?i(e):n(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+o+")"+"?",u="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[i,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),l="(?:"+[i+n+"?",n,s,a,r].join("|")+")",f=RegExp(o+"(?="+o+")|"+l+u,"g");e.exports=function(e){return e.match(f)||[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(71));var o=function(e){var t=function(t,r,o,i,s,a){return new n.default(function(n,c){var u=new XMLHttpRequest,l="string"==typeof i,f=new FormData;if("function"==typeof a&&(u.upload.onprogress=a),!l)for(var p in i)f.append(p,i[p]);u.onload=function(){if(u.status>=200&&u.status<300){var e={};try{e=(e="string"==typeof u.response?JSON.parse(u.response):{})&&e.data?e.data:e}catch(t){e={}}var o=e.hasOwnProperty("url")?e.url:"".concat(u.responseURL,"/").concat(r);o&&"/"===o[0]&&(o="".concat(t).concat(o)),n({url:o,data:e})}else c(u.response||"Unable to upload file")},u.onerror=function(){return c(u)},u.onabort=function(){return c(u)};var h=t+(t.indexOf("?")>-1?"&":"?");for(var d in o)h+="".concat(d,"=").concat(o[d],"&");"&"===h[h.length-1]&&(h=h.substr(0,h.length-1)),u.open("POST",h),l&&u.setRequestHeader("Content-Type","application/json");var v=e.getToken();if(v&&u.setRequestHeader("x-jwt-token",v),s){var y=JSON.parse(s);for(var m in y)u[m]=y[m]}u.send(l?i:f)})};return{title:"Url",name:"url",uploadFile:function(r,n,o,i,s,a){var c=function(c){return t(s,n,{baseUrl:encodeURIComponent(e.projectUrl),project:c?c.project:"",form:c?c._id:""},{file:r,name:n,dir:o},a,i).then(function(t){return t.data=t.data||{},t.data.baseUrl=e.projectUrl,t.data.project=c?c.project:"",t.data.form=c?c._id:"",{storage:"url",name:n,url:t.url,size:r.size,type:r.type,data:t.data}})};return r.private&&e.formId?e.loadForm().then(function(e){return c(e)}):c()},downloadFile:function(r){return r.private?(e.submissionId&&r.data&&(r.data.submission=e.submissionId),t(r.url,r.name,{},JSON.stringify(r)).then(function(e){return e.data})):n.default.resolve(r)}}};o.title="Url";var i=o;t.default=i},function(e,t,r){(function(n,o){var i;
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(n,o,s){o[n]=o[n]||s(),void 0!==e&&e.exports?e.exports=o[n]:void 0===(i=function(){return o[n]}.call(t,r,t,e))||(e.exports=i)}("Promise",void 0!==n?n:this,function(){"use strict";var e,t,r,n=Object.prototype.toString,i=void 0!==o?function(e){return o(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==n})}}catch(t){e=function(e,t,r){return e[t]=r,e}}function s(e,n){r.add(e,n),t||(t=i(r.drain))}function a(e){var t,r=typeof e;return null==e||"object"!=r&&"function"!=r||(t=e.then),"function"==typeof t&&t}function c(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,r){var n,o;try{!1===t?r.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=a(n))?o.call(n,r.resolve,r.reject):r.resolve(n)}catch(e){r.reject(e)}}function l(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&s(c,t))}function f(e,t,r,n){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){r(o,e)},n)}(o)}function p(e){this.def=e,this.triggered=!1}function h(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new function(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(e,r){var n={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),t.chain.push(n),0!==t.state&&s(c,t),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(t){var r,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(r=a(t))?s(function(){var o=new p(n);try{r.call(t,function(){e.apply(o,arguments)},function(){l.apply(o,arguments)})}catch(e){l.call(o,e)}}):(n.msg=t,n.state=1,n.chain.length>0&&s(c,n))}catch(e){l.call(new p(n),e)}}}).call(t,e)},function(e){l.call(t,e)})}catch(e){l.call(t,e)}}r=function(){var e,r,n;return{add:function(t,o){n=new function(e,t){this.fn=e,this.self=t,this.next=void 0}(t,o),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var n=e;for(e=r=t=void 0;n;)n.fn.call(n.self),n=n.next}}}();var d=e({},"constructor",h,!1);return h.prototype=d,e(d,"__NPO__",0,!1),e(h,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)})}),e(h,"reject",function(e){return new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)})}),e(h,"all",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var o=e.length,i=Array(o),s=0;f(t,e,function(e,t){i[e]=t,++s===o&&r(i)},n)})}),e(h,"race",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");f(t,e,function(e,t){r(t)},n)})}),h})}).call(this,r(4),r(72).setImmediate)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(73),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o=1,i={},s=!1,a=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;n=function(t){var r=a.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return i[o]=s,n(o),o++},c.clearImmediate=u}function u(e){delete i[e]}function l(e){if(s)setTimeout(l,0,e);else{var t=i[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{u(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(4),r(23))},function(e,t,r){var n=r(75);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},function(e,t,r){var n=r(76),o=r(102);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},function(e,t,r){var n=r(2),o=r(77),i=r(78),s=r(27);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(s(e))}},function(e,t,r){var n=r(2),o=r(13),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||s.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t,r){var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r(79)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)}),t});e.exports=i},function(e,t,r){var n=r(80),o=500;e.exports=function(e){var t=n(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=r(28),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},function(e,t,r){var n=r(82),o=r(9),i=r(14);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(e,t,r){var n=r(83),o=r(88),i=r(89),s=r(90),a=r(91);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},function(e,t,r){var n=r(8);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,r){var n=r(29),o=r(85),i=r(6),s=r(30),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?p:a).test(s(e))}},function(e,t,r){var n=r(86),o=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},function(e,t,r){var n=r(0)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(8),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===o?void 0:r}return i.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(8),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(8),o="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?o:t,this}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(10),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},function(e,t,r){var n=r(10);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(10);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(10);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(11);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(11);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(11);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(11);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(13),o=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t,r){var n=r(104),o=1,i=4;e.exports=function(e){return n(e,o|i)}},function(e,t,r){var n=r(105),o=r(111),i=r(32),s=r(113),a=r(123),c=r(126),u=r(127),l=r(128),f=r(130),p=r(131),h=r(132),d=r(21),v=r(137),y=r(138),m=r(144),b=r(2),g=r(35),_=r(146),j=r(6),w=r(148),k=r(15),x=1,U=2,A=4,T="[object Arguments]",O="[object Function]",P="[object GeneratorFunction]",I="[object Object]",E={};E[T]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[I]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[O]=E["[object WeakMap]"]=!1,e.exports=function e(t,r,S,R,F,L){var q,B=r&x,C=r&U,M=r&A;if(S&&(q=F?S(t,R,F,L):S(t)),void 0!==q)return q;if(!j(t))return t;var N=b(t);if(N){if(q=v(t),!B)return u(t,q)}else{var z=d(t),D=z==O||z==P;if(g(t))return c(t,B);if(z==I||z==T||D&&!F){if(q=C||D?{}:m(t),!B)return C?f(t,a(q,t)):l(t,s(q,t))}else{if(!E[z])return F?t:{};q=y(t,z,B)}}L||(L=new n);var $=L.get(t);if($)return $;if(L.set(t,q),w(t))return t.forEach(function(n){q.add(e(n,r,S,n,t,L))}),q;if(_(t))return t.forEach(function(n,o){q.set(o,e(n,r,S,o,t,L))}),q;var G=M?C?h:p:C?keysIn:k,H=N?void 0:G(t);return o(H||t,function(n,o){H&&(n=t[o=n]),i(q,o,e(n,r,S,o,t,L))}),q}},function(e,t,r){var n=r(9),o=r(106),i=r(107),s=r(108),a=r(109),c=r(110);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,e.exports=u},function(e,t,r){var n=r(9);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(9),o=r(14),i=r(28),s=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<s-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(1),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){var n=r(12),o=r(15);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(116),o=r(3),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t,r){var n=r(5),o=r(3),i="[object Arguments]";e.exports=function(e){return o(e)&&n(e)==i}},function(e,t){e.exports=function(){return!1}},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?r:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(120),o=r(17),i=r(18),s=i&&i.isTypedArray,a=s?o(s):n;e.exports=a},function(e,t,r){var n=r(5),o=r(36),i=r(3),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[n(e)]}},function(e,t,r){var n=r(19),o=r(122),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){var n=r(37)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(12),o=r(39);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t,r){var n=r(6),o=r(19),i=r(125),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=o(e),r=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&r.push(a);return r}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){(function(e){var n=r(0),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(16)(e))},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(12),o=r(20);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}},function(e,t,r){var n=r(12),o=r(41);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t,r){var n=r(44),o=r(20),i=r(15);e.exports=function(e){return n(e,i,o)}},function(e,t,r){var n=r(44),o=r(41),i=r(39);e.exports=function(e){return n(e,i,o)}},function(e,t,r){var n=r(1)(r(0),"DataView");e.exports=n},function(e,t,r){var n=r(1)(r(0),"Promise");e.exports=n},function(e,t,r){var n=r(1)(r(0),"Set");e.exports=n},function(e,t,r){var n=r(1)(r(0),"WeakMap");e.exports=n},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,r){var n=r(22),o=r(140),i=r(141),s=r(142),a=r(143),c="[object Boolean]",u="[object Date]",l="[object Map]",f="[object Number]",p="[object RegExp]",h="[object Set]",d="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",g="[object Float64Array]",_="[object Int8Array]",j="[object Int16Array]",w="[object Int32Array]",k="[object Uint8Array]",x="[object Uint8ClampedArray]",U="[object Uint16Array]",A="[object Uint32Array]";e.exports=function(e,t,r){var T=e.constructor;switch(t){case y:return n(e);case c:case u:return new T(+e);case m:return o(e,r);case b:case g:case _:case j:case w:case k:case x:case U:case A:return a(e,r);case l:return new T;case f:case d:return new T(e);case p:return i(e);case h:return new T;case v:return s(e)}}},function(e,t,r){var n=r(0).Uint8Array;e.exports=n},function(e,t,r){var n=r(22);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,r){var n=r(7),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},function(e,t,r){var n=r(22);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(145),o=r(43),i=r(19);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(o(e))}},function(e,t,r){var n=r(6),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},function(e,t,r){var n=r(147),o=r(17),i=r(18),s=i&&i.isMap,a=s?o(s):n;e.exports=a},function(e,t,r){var n=r(21),o=r(3),i="[object Map]";e.exports=function(e){return o(e)&&n(e)==i}},function(e,t,r){var n=r(149),o=r(17),i=r(18),s=i&&i.isSet,a=s?o(s):n;e.exports=a},function(e,t,r){var n=r(21),o=r(3),i="[object Set]";e.exports=function(e){return o(e)&&n(e)==i}}]);